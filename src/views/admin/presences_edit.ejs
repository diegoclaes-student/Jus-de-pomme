<div class="row">
  <div class="col-12 col-lg-8 mx-auto">
    <div class="d-flex align-items-center justify-content-between mb-3">
      <h2 class="h4 m-0"><i class="bi bi-pencil-square me-2"></i>Modifier la présence</h2>
      <a href="/admin/presences" class="btn btn-outline-secondary btn-sm"><i class="bi bi-arrow-left"></i> Retour</a>
    </div>

    <div class="card p-3 p-md-4">
      <% if (error) { %><div class="alert alert-danger"><%= error %></div><% } %>

      <% if (reservationsCount > 0) { %>
        <div class="alert alert-warning">
          <i class="bi bi-exclamation-triangle me-1"></i>
          Cette présence possède <b><%= reservationsCount %></b> réservation(s).
          Modifier la date ou les heures va supprimer et régénérer les créneaux, ce qui supprimera les réservations attachées aux créneaux supprimés.
          Coche la case ci-dessous pour confirmer que tu comprends l’impact.
        </div>
      <% } %>

      <form method="post" class="row g-3">
        <div class="col-12">
          <label class="form-label">Lieu</label>
          <input class="form-control" name="location" value="<%= presence.location %>" required>
        </div>
        <div class="col-md-4">
          <label class="form-label">Date</label>
          <input type="date" class="form-control" name="date" value="<%= presence.date %>" required>
        </div>
        <div class="col-md-4">
          <label class="form-label">Heure de début</label>
          <input type="time" class="form-control" name="start_time" value="<%= presence.start_time %>" required>
        </div>
        <div class="col-md-4">
          <label class="form-label">Heure de fin</label>
          <input type="time" class="form-control" name="end_time" value="<%= presence.end_time %>" required>
        </div>

        <% if (reservationsCount > 0) { %>
          <div class="col-12 form-check">
            <input class="form-check-input" type="checkbox" id="confirmImpact" name="confirm_impact" value="yes" required>
            <label class="form-check-label" for="confirmImpact">
              Je comprends que des réservations peuvent être supprimées suite à cette modification.
            </label>
          </div>
        <% } %>

        <div class="col-12 d-flex gap-2">
          <button class="btn btn-primary"><i class="bi bi-save2 me-1"></i>Enregistrer</button>
          <a class="btn btn-outline-secondary" href="/admin/presences">Annuler</a>
        </div>
      </form>
    </div>
  </div>
</div>